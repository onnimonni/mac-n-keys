import XCTest

@testable import Lib

final class Bech32Tests: XCTestCase {
  func testEncode() throws {
    XCTAssertEqual(
      "age1se1qv9p3zge0tmqxczme5pn3p7g3x80t0uxvlk30s9vevjq0lxuy8rzss09jyq",
      Bech32.encode(
        hrp: "age1se",
        data: Data([
          0x03, 0x0a, 0x18, 0x89, 0x19, 0x7a, 0xf6, 0x03, 0x60, 0x5b, 0xcd, 0x03, 0x38, 0x87,
          0xc8, 0x89, 0x8e, 0xf5, 0xbf, 0x86, 0x67, 0xed, 0x17, 0xc0, 0xac, 0xcb, 0x24, 0x07,
          0xfc, 0xdc, 0x21, 0xc6, 0x28,
        ])))
  }

  func testDecode() throws {
    let result = try Bech32.decode(
      "age1se1qv9p3zge0tmqxczme5pn3p7g3x80t0uxvlk30s9vevjq0lxuy8rzss09jyq")
    XCTAssertEqual("age1se", result.hrp)
    XCTAssertEqual(
      Data([
        0x03, 0x0a, 0x18, 0x89, 0x19, 0x7a, 0xf6, 0x03, 0x60, 0x5b, 0xcd, 0x03, 0x38, 0x87,
        0xc8, 0x89, 0x8e, 0xf5, 0xbf, 0x86, 0x67, 0xed, 0x17, 0xc0, 0xac, 0xcb, 0x24, 0x07,
        0xfc, 0xdc, 0x21, 0xc6, 0x28,
      ]), result.data)
  }
}
